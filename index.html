<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSV Data Visualizer - Inspired by RawGraphs</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-box-and-violin@4.0.0/dist/chartjs-chart-box-and-violin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>CSV Data Visualizer</h1>
        <p>Upload a CSV, map columns, and create charts like bar, line, scatter, and more.</p>
        
        <!-- File Upload -->
        <section>
            <input type="file" id="csvFile" accept=".csv" />
            <button onclick="loadCSV()">Load CSV</button>
        </section>
        
        <!-- Data Preview -->
        <section id="dataPreview" style="display:none;">
            <h2>Data Preview</h2>
            <table id="dataTable"></table>
            <div id="columnSelect">
                <label>X-Axis: <select id="xCol"></select></label>
                <label>Y-Values: <select id="yCol"></select></label>
                <label>Group/Color: <select id="groupCol"><option value="">None</option></select></label>
            </div>
        </section>
        
        <!-- Chart Type -->
        <section id="chartSection" style="display:none;">
            <h2>Select Chart Type</h2>
            <select id="chartType">
                <option value="bar">Bar</option>
                <option value="bar" data-stacked="true">Stacked Bar</option>
                <option value="line">Line</option>
                <option value="line" data-area="true">Area</option>
                <option value="scatter">Scatter</option>
                <option value="histogram">Histogram (uses Y col)</option>
                <option value="boxplot">Boxplot (uses Y and Group)</option>
                <option value="pie">Pie (uses X as labels, Y as values)</option>
            </select>
            <button onclick="renderChart()">Render Chart</button>
        </section>
        
        <!-- Chart Canvas -->
        <section id="chartContainer" style="display:none;">
            <canvas id="myChart"></canvas>
            <button onclick="downloadChart('png')">Download PNG</button>
            <!-- SVG download requires additional plugin; simplified to PNG -->
        </section>
    </div>
    
    <script src="script.js"></script>
</body>
</html>